<!DOCTYPE html>
<meta charset="utf-8" />
<style>
  #empresaMarcaModeloContainer {
    max-height: 410px;
    overflow: auto;
  }

  .separate {
    width: 100%;
  }
</style>

<body>
  <div id="empresaMarcaModeloContainer"></div>
  <script src="d3.v7.js"></script>
  <script>
    let dados = [
      {
        name: "CRASA",
        mercedez: 10,
        scania: 7,
        dina: 5,
        masa: 17,
        volvo: 99,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "CCA",
        mercedez: 2,
        scania: 1,
        dina: 4,
        masa: 2,
        volvo: 90,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "CE4",
        mercedez: 1,
        scania: 9,
        dina: 3,
        masa: 8,
        volvo: 78,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "CISA",
        mercedez: 68,
        scania: 3,
        dina: 9,
        masa: 22,
        volvo: 78,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "COPATTSA",
        mercedez: 43,
        scania: 112,
        dina: 45,
        masa: 3,
        volvo: 43,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "COPSA",
        mercedez: 23,
        scania: 66,
        dina: 7,
        masa: 1,
        volvo: 33,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "COR3NSA",
        mercedez: 22,
        scania: 35,
        dina: 11,
        masa: 98,
        volvo: 15,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "CTT",
        mercedez: 32,
        scania: 53,
        dina: 5,
        masa: 17,
        volvo: 123,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "CURVIX",
        mercedez: 4,
        scania: 7,
        dina: 5,
        masa: 17,
        volvo: 123,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "MIVSA",
        mercedez: 11,
        scania: 22,
        dina: 5,
        masa: 17,
        volvo: 123,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "OL7",
        mercedez: 8,
        scania: 33,
        dina: 5,
        masa: 17,
        volvo: 123,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "RECSA",
        mercedez: 23,
        scania: 8,
        dina: 5,
        masa: 17,
        volvo: 123,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "RTP",
        mercedez: 76,
        scania: 3,
        dina: 5,
        masa: 17,
        volvo: 123,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "SKYBUS",
        mercedez: 67,
        scania: 44,
        dina: 5,
        masa: 17,
        volvo: 123,
      },
      {
        name: "S9A",
        mercedez: 12,
        scania: 43,
        dina: 5,
        masa: 17,
        volvo: 123,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "LAO",
        mercedez: 1,
        scania: 99,
        dina: 5,
        masa: 17,
        volvo: 123,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
      {
        name: "LAO1",
        mercedez: 44,
        scania: 4,
        dina: 5,
        masa: 17,
        volvo: 123,
        modeloVolvo: "B270F",
        modeloMasa: "Modelo 1",
        modeloDina: "Modelo 2",
        modeloScania: "Linner 12",
        modeloMercedez: "Linner 121",
      },
    ];

    var width = 300;
    var height = 3900;

    const empresas = ["volvo, masa, dina, scania, mercedez"];

    // function criaBarsGrafico(array) {
    //   array.forEach((element) => {
    //     grafico
    //       .selectAll(`#${element}`)
    //       .data(dados)
    //       .enter()
    //       .append("g");
    //   });
    // }

    let grafico = d3
      .select("#empresaMarcaModeloContainer")
      .append("svg")
      .attr("width", width)
      .attr("height", height);

    let barsVolvo = grafico
      .selectAll("#bars-volvo")
      .data(dados)
      .enter()
      .append("g");

    let barsMasa = grafico
      .selectAll("#bars-masa")
      .data(dados)
      .enter()
      .append("g");

    let barsDina = grafico
      .selectAll("#bars-dina")
      .data(dados)
      .enter()
      .append("g");

    let barsScania = grafico
      .selectAll("#bars-scania")
      .data(dados)
      .enter()
      .append("g");

    let barsMercedez = grafico
      .selectAll("#bars-mercedez")
      .data(dados)
      .enter()
      .append("g");

    // Dados volvo
    barsVolvo
      .append("rect")
      .attr("y", 10)
      .attr("x", (d, i) => {
        return -i * 230 - 50;
      })
      .attr("transform", `rotate(${-90})`)
      .attr("width", 15)
      .attr("height", (d) => d.volvo)
      .attr("fill", "#E35F2E");

    barsVolvo
      .append("text")
      .attr("y", (d, i) => {
        return i * 230 + 45;
      })
      .attr("x", (d, i) => {
        return d.volvo + 15;
      })
      .attr("fill", "white")
      .attr("font-size", "10px")
      .attr("font-weight", "bold")
      .text((d) => {
        return d.volvo !== 0 ? d.volvo : "";
      });

    barsVolvo
      .append("text")
      .attr("y", (d, i) => {
        return i * 230 + 30;
      })
      .attr("x", 10)
      .attr("fill", "#829596")
      .attr("font-size", "9px")
      .attr("font-weight", 600)
      .text((d) => {
        return d.modeloVolvo !== "" ? `VOLVO / ${d.modeloVolvo}` : "";
      });

    barsVolvo
      .append("text")
      .attr("y", (d, i) => {
        return i * 230 + 15;
      })
      .attr("x", 10)
      .attr("fill", "white")
      .attr("font-size", "10px")
      .attr("font-weight", 600)
      .text((d) => {
        return d.name;
      });

    // Fim dados Volvo

    // Dados Masa
    barsMasa
      .append("rect")
      .attr("y", 10)
      .attr("x", (d, i) => {
        return -i * 230 - 90;
      })
      .attr("transform", `rotate(${-90})`)
      .attr("width", 15)
      .attr("height", (d) => d.masa)
      .attr("fill", "#F78536");

    barsMasa
      .append("text")
      .attr("y", (d, i) => {
        return i * 230 + 85;
      })
      .attr("x", (d, i) => {
        return d.masa + 15;
      })
      .attr("fill", "white")
      .attr("font-size", "9px")
      .text((d) => {
        return d.masa !== 0 ? d.masa : "";
      });

    barsMasa
      .append("text")
      .attr("y", (d, i) => {
        return i * 230 + 70;
      })
      .attr("x", 10)
      .attr("fill", "#829596")
      .attr("font-size", "9px")
      .attr("font-weight", 600)
      .text((d) => {
        return d.modeloMasa !== "" ? `MASA / ${d.modeloMasa}` : "";
      });

    // Fim dados Masa

    // Dados Dina

    barsDina
      .append("rect")
      .attr("y", 10)
      .attr("x", (d, i) => {
        return -i * 230 - 130;
      })
      .attr("transform", `rotate(${-90})`)
      .attr("width", 15)
      .attr("height", (d) => d.dina)
      .attr("fill", "#FFC236");

    barsDina
      .append("text")
      .attr("y", (d, i) => {
        return i * 230 + 125;
      })
      .attr("x", (d, i) => {
        return d.dina + 15;
      })
      .attr("fill", "white")
      .attr("font-size", "9px")
      .text((d) => {
        return d.dina !== 0 ? d.dina : "";
      });

    barsDina
      .append("text")
      .attr("y", (d, i) => {
        return i * 230 + 110;
      })
      .attr("x", 10)
      .attr("fill", "#829596")
      .attr("font-size", "9px")
      .attr("font-weight", 600)
      .text((d) => {
        return d.modeloDina !== "" ? `DINA / ${d.modeloDina}` : "";
      });

    // Fim dados Dina

    // Dados Scania
    barsScania
      .append("rect")
      .attr("y", 10)
      .attr("x", (d, i) => {
        return -i * 230 - 170;
      })
      .attr("transform", `rotate(${-90})`)
      .attr("width", 15)
      .attr("height", (d) => d.scania)
      .attr("fill", "#FF982F");

    barsScania
      .append("text")
      .attr("y", (d, i) => {
        return i * 230 + 165;
      })
      .attr("x", (d, i) => {
        return d.scania + 15;
      })
      .attr("fill", "white")
      .attr("font-size", "9px")
      .text((d) => {
        return d.scania !== 0 ? d.scania : "";
      });

    barsScania
      .append("text")
      .attr("y", (d, i) => {
        return i * 230 + 150;
      })
      .attr("x", 10)
      .attr("fill", "#829596")
      .attr("font-size", "9px")
      .attr("font-weight", 600)
      .text((d) => {
        return d.modeloScania !== "" ? `SCANIA / ${d.modeloScania}` : "";
      });

    // Fim Dados Scania

    // Dados Mercedez

    barsMercedez
      .append("rect")
      .attr("y", 10)
      .attr("x", (d, i) => {
        return -i * 230 - 210;
      })
      .attr("transform", `rotate(${-90})`)
      .attr("width", 15)
      .attr("height", (d) => d.mercedez)
      .attr("fill", "#EE4935");

    barsMercedez
      .append("text")
      .attr("y", (d, i) => {
        return i * 230 + 205;
      })
      .attr("x", (d, i) => {
        return d.mercedez + 15;
      })
      .attr("fill", "white")
      .attr("font-size", "9px")
      .text((d) => {
        return d.mercedez !== 0 ? d.mercedez : "";
      });

    barsMercedez
      .append("text")
      .attr("y", (d, i) => {
        return i * 230 + 190;
      })
      .attr("x", 10)
      .attr("fill", "#829596")
      .attr("font-size", "9px")
      .attr("font-weight", 600)
      .text((d) => {
        return d.modeloMercedez !== "" ? `MERCEDEZ / ${d.modeloMercedez}` : "";
      });

    // Fim Dados Mercedez
  </script>
</body>
